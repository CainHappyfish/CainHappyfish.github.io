{"title":"DMA方式","uid":"add768c24e8f1c57682e3d07a8cf025b","slug":"DMA方式","date":"2023-12-12T07:14:56.000Z","updated":"2023-12-12T08:01:38.003Z","comments":true,"path":"api/articles/DMA方式.json","keywords":null,"cover":[],"content":"<h1 id=\"DMA方式及接口\"><a href=\"#DMA方式及接口\" class=\"headerlink\" title=\"DMA方式及接口\"></a>DMA方式及接口</h1><p><strong>定义</strong></p>\n<p>DMA，即直接存储器访问（Direct Memory Access），它指这样一种传送控制方式：依靠硬件<strong>直接在主存与外围设备之间进行数据传送</strong>，在传送<strong>过程中不需要CPU的干预</strong>。</p>\n<p><strong>特点</strong>：DMA方式只能处理简单的数据传送。</p>\n<p><strong>应用</strong>：DMA传送方式一般应用于主存与高速I/O设备之间的简单数据传送。高速I/O设备包括磁盘、磁带、光盘等外存储器，以及其他带有局部存储器的外围设备、通信设备等等。典型的例子是<strong>磁盘调用</strong>，磁盘读写采用DMA方式进行数据传送，而对寻道正确性的判别、批量传送结束后的处理，则采用中断方式。</p>\n<h2 id=\"DMA控制器与接口的连接\"><a href=\"#DMA控制器与接口的连接\" class=\"headerlink\" title=\"DMA控制器与接口的连接\"></a>DMA控制器与接口的连接</h2><p><img src=\"https://pic.imgdb.cn/item/65780c08c458853aef58c165.jpg\" alt=\"\"></p>\n<h3 id=\"DMA控制器功能\"><a href=\"#DMA控制器功能\" class=\"headerlink\" title=\"DMA控制器功能\"></a>DMA控制器功能</h3><p>初始化：接收初始化信息（传送方向、主存首址、交换量）</p>\n<p>传送前：接收外设DMA请求，判优，向CPU申请总线。</p>\n<p>传送期间：接管总线权，发地址、读/写命令。（不需要CPU干预）</p>\n<h3 id=\"接口功能\"><a href=\"#接口功能\" class=\"headerlink\" title=\"接口功能\"></a>接口功能</h3><p>初始化：接收初始化信息（外设寻址信息）。</p>\n<p>传送前，外设准备好：向DMA控制器发请求。</p>\n<p>传送期间：传送数据。</p>\n<h2 id=\"磁盘存储器接口（磁盘适配器）\"><a href=\"#磁盘存储器接口（磁盘适配器）\" class=\"headerlink\" title=\"磁盘存储器接口（磁盘适配器）\"></a>磁盘存储器接口（磁盘适配器）</h2><ul>\n<li><p>系统连接方式：</p>\n<p><img src=\"https://pic.imgdb.cn/item/65780e64c458853aef5fb144.jpg\" alt=\"\"></p>\n<p>两级DMA控制器：</p>\n<ul>\n<li>主机板上DMA控制器：M$<del>\\longleftrightarrow</del>$适配器</li>\n<li>适配器内DMA控制器：适配器$<del>\\longleftrightarrow</del>$适配器</li>\n</ul>\n</li>\n<li><p>硬盘适配器粗框</p>\n<p><img src=\"https://pic.imgdb.cn/item/65780eeec458853aef615a81.jpg\" alt=\"\"></p>\n<ul>\n<li>处理机接口（面向系统总线一侧）<ul>\n<li>EPROM控制逻辑：放有硬盘驱动程序(系统自检时被引入系统管理之下)。</li>\n<li>I/O端口控制逻辑：接收CPU送来的端口地址、读/写命令，访问处理机接口中的相应寄存器。</li>\n</ul>\n</li>\n<li>智能主控器<ul>\n<li>微处理器：执行硬盘控制程序</li>\n<li>RAM：扇区缓存（存放第二个扇区数据）</li>\n<li>ROM：存放硬盘控制程序</li>\n<li>DMA控制器：控制主控RAM与驱动器之间的数据传送。</li>\n<li>硬盘控制逻辑：控制串-并转换：<ul>\n<li>写盘：主控RAM$<del>\\stackrel{并-串}{\\longrightarrow}</del>$驱动器</li>\n<li>读盘：驱动器$<del>\\stackrel{串-并}{\\longrightarrow}</del>$主控RAM</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>驱动器接口（面向设备一侧）<ul>\n<li>驱动器控制逻辑：向驱动器送出控制命令（驱动器选择、寻道方向选择、读、写等）</li>\n<li>驱动器状态逻辑：接收驱动器状态信息（选中、就绪、寻道完成等）</li>\n<li>传送串行数据</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>硬盘调用过程（DMA方式）</p>\n<ul>\n<li>初始化：CPU向适配器送出驱动器号、圆柱面号、磁头号、起始扇区号、扇区数等外设寻址信息；向DMA控制器送出传送方向、主存首址、 交换量等信息。</li>\n<li>适配器启动寻道，并用中断方式判寻道是否正确。（不正确，重新寻道；正确，启动磁盘读/写。）</li>\n<li>适配器准备好（读盘：主控RAM满一扇区；写盘：主控RAM空一扇区），提出DMA请求。</li>\n<li>CPU响应，由DMA控制器控制总线，实现传送。</li>\n<li>批量传送完毕，适配器申请中断。</li>\n<li>CPU响应，作善后处理。</li>\n</ul>\n</li>\n</ul>\n","text":"DMA方式及接口定义 DMA，即直接存储器访问（Direct Memory Access），它指这样一种传送控制方式：依靠硬件直接在主存与外围设备之间进行数据传...","permalink":"/post/DMA方式","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"计算机组成原理","slug":"计算机组成原理","count":10,"path":"api/tags/计算机组成原理.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#DMA%E6%96%B9%E5%BC%8F%E5%8F%8A%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">DMA方式及接口</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DMA%E6%8E%A7%E5%88%B6%E5%99%A8%E4%B8%8E%E6%8E%A5%E5%8F%A3%E7%9A%84%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">DMA控制器与接口的连接</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DMA%E6%8E%A7%E5%88%B6%E5%99%A8%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">DMA控制器功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8E%A5%E5%8F%A3%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">接口功能</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%A3%81%E7%9B%98%E5%AD%98%E5%82%A8%E5%99%A8%E6%8E%A5%E5%8F%A3%EF%BC%88%E7%A3%81%E7%9B%98%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%89\"><span class=\"toc-text\">磁盘存储器接口（磁盘适配器）</span></a></li></ol></li></ol>","author":{"name":"C4IN","slug":"blog-author","avatar":"/pic/au.jpg","link":"/","description":"这里是破酥的个人博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"计组复习-1","uid":"66c8c18b39717219057479840ba6c9df","slug":"计组复习-1","date":"2023-12-13T11:53:39.000Z","updated":"2023-12-24T01:24:05.314Z","comments":true,"path":"api/articles/计组复习-1.json","keywords":null,"cover":[],"text":"计算机中的信息表示一、基本概念及应用（注明：应用是指基本概念的应用） 一个数值型数据的完整表示需三个方面？ 权、基数？ 真值？机器数的定义？分类？ 数的定点表示...","permalink":"/post/计组复习-1","photos":[],"count_time":{"symbolsCount":"9.3k","symbolsTime":"8 mins."},"categories":[],"tags":[{"name":"计算机组成原理","slug":"计算机组成原理","count":10,"path":"api/tags/计算机组成原理.json"}],"author":{"name":"C4IN","slug":"blog-author","avatar":"/pic/au.jpg","link":"/","description":"这里是破酥的个人博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"中断","uid":"87122f1313843578dbea5a21e7a0d4c1","slug":"中断","date":"2023-12-12T01:23:45.000Z","updated":"2023-12-12T07:14:00.780Z","comments":true,"path":"api/articles/中断.json","keywords":null,"cover":[],"text":"中断方式及接口中断：CPU暂时中止现行程序的执行，转去执行为某个随机事态服务的中断处理程序。处理完毕后自动恢复原程序的执行。 实质： 程序切换。 方法： 保存断...","permalink":"/post/中断","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"计算机组成原理","slug":"计算机组成原理","count":10,"path":"api/tags/计算机组成原理.json"}],"author":{"name":"C4IN","slug":"blog-author","avatar":"/pic/au.jpg","link":"/","description":"这里是破酥的个人博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}